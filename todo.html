<html>
    <header>
        <title>My todo App</title>
    </header>
    <body>
        <input type="text" id="todo-title">
        <input type="date" id="date-picker">
        <button onclick="addTitle()">add title</button>
        <div id="display-title" >

        <script>
            // javascript object (key-value pair)
            let todo = [
                {title: 'Get grocerise', duedate: '2022-1-10', id: '1'},
                {title: 'Wash car', duedate: '2022-2-19', id: '2'},
                {title: 'Make dinner', duedate: '2022-10-10', id: '3'}];

            render();

            function render(){
                // reset div 'display-title'
                document.getElementById('display-title').innerHTML = '';
                
                todo.forEach(function(parameter){
                    const element = document.createElement('div');
                    element.innerText = parameter.title + " " + parameter.duedate;
                    const deleteButton = document.createElement('button');
                    deleteButton.style = 'margin-left: 10px;';
                    deleteButton.innerText = 'Delete';
                    deleteButton.id = parameter.id;
                    deleteButton.onclick = deleteTitle;
                    element.appendChild(deleteButton);
                    const title_display = document.getElementById('display-title');
                    title_display.appendChild(element);
                });
            }

            function addTitle(){
                const textBox = document.getElementById('todo-title');
                const duedateBox = document.getElementById("date-picker");
                const id = new Date().getTime();
                todo.push({title: textBox.value, duedate: duedateBox.value, id: id});
                render();
            }

            function deleteTitle(event){               
                const deleteButton = event.target;
                const deletedid = deleteButton.id;
                
                todo = todo.filter(function(parameter){
                    if(parameter.id != deletedid){
                        return true;
                    }   
                    else {
                        return false;
                    }            
                });
                render();
            }
                
        </script> 
    </body>
</html>
